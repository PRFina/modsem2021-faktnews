
/* Trova titolo review e nome autore di una data FactCheckingOrganization
   con ricerca per nome della FCO "approssimata", ovvero con regex.

   In questo caso il risultato ritorna le review della voce.info
*/
SELECT ?rname ?fcname ?fconame
WHERE {
      ?r a fn:Review; fn:isReviewedBy ?fc; dct:title ?rn.
      ?fc fn:affiliatedTo ?fco; schema:name ?fcn.
      ?fco a fn:FactCheckingOrganization.
     

      ?fco schema:name ?fcon.
      FILTER(REGEX(?fcon, "voce","i")).
      BIND(STR(?rn) AS ?rname).	
      BIND(STR(?fcn) AS ?fcname)
      BIND(STR(?fcon) AS ?fconame).

} LIMIT 100


/*
Trova tutti i claim che non hanno nessuna review.
Sfrutta l'operatore MINUS per trovare tutti i claim con review
attraverso il predicato :claimReviewed (ricordiamo essere una property chain)
e successivamente gli sottrae da tutti i claims disponibili nel knowledge graph
*/

PREFIX : <http://www.modsem.org/fakt-news#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX fn: <http://www.modsem.org/fakt-news#>
PREFIX schema: <http://schema.org/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT ?claim ?claimant_name
WHERE { 
    ?claim a :Claim; 
       :isClaimedBy ?claimant .
    ?claimant schema:name ?claimant_name.
    MINUS {
       ?rev :claimReviewed ?claim. 
    }
} limit 100 

/*
Trova tutti i claim la cui data di pubblicazione è compresa in un intervallo.
I valori dell'inizio e fine del range sono hardcoded nella query e bindati con
first_date e last_date.

Nel caso specifico, i valore inseriti permettono di recuperare tutti e i soli claim del 2020.

La particolaritòà della query è nell aver utilizzatop il costruttore xsd:datetime poiché
il confronto tra date è specificato dallo standard solo per tipi datetime
*/

PREFIX : <http://www.modsem.org/fakt-news#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX fn: <http://www.modsem.org/fakt-news#>
PREFIX schema: <http://schema.org/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX dct: <http://purl.org/dc/terms/>

SELECT ?claim ?claim_date
WHERE { 
    ?claim a :Claim; dct:date ?claim_date
    BIND("2020-01-01T00:00:00Z"^^xsd:dateTime AS ?first_date)
    BIND("2021-01-01T00:00:00Z"^^xsd:dateTime AS ?last_date)
    BIND(xsd:dateTime(?claim_date) AS ?claim_datetime)
    FILTER( ?claim_datetime > ?first_date && ?claim_datetime < ?last_date )

} limit 100 